{
	"variables": ["brick"],
	"data": [
		{
			"brick": {
				"vars": ["title=Files", "publish=0"],
				"quoted_indices": []
			},
			"expected": {
				"vars": [],
				"quoted_indices": [],
				"local_settings": {
					"title": "Files",
					"publish": "0"
				}
			}
		},
		{
			"brick": {
				"vars": ["item", "test", "key=\"some value in quotes\""],
				"quoted_indices": []
			},
			"expected": {
				"vars": ["item", "test"],
				"quoted_indices": [],
				"local_settings": {
					"key": "some value in quotes"
				}
			}
		},
		{
			"brick": {
				"vars": ["path", "title=\"Multiple Words Here\"", "status=active"],
				"quoted_indices": []
			},
			"expected": {
				"vars": ["path"],
				"quoted_indices": [],
				"local_settings": {
					"title": "Multiple Words Here",
					"status": "active"
				}
			}
		},
		{
			"brick": {
				"vars": ["tags=[tag1,tag2,tag3]", "count=5"],
				"quoted_indices": []
			},
			"expected": {
				"vars": [],
				"quoted_indices": [],
				"local_settings": {
					"tags": ["tag1", "tag2", "tag3"],
					"count": "5"
				}
			}
		},
		{
			"brick": {
				"vars": ["options[color]=blue", "options[size]=large", "name=test"],
				"quoted_indices": []
			},
			"expected": {
				"vars": [],
				"quoted_indices": [],
				"local_settings": {
					"options": {
						"color": "blue",
						"size": "large"
					},
					"name": "test"
				}
			}
		},
		{
			"brick": {
				"vars": ["items[0]=[a,b,c]", "items[1]=[x,y,z]"],
				"quoted_indices": []
			},
			"expected": {
				"vars": [],
				"quoted_indices": [],
				"local_settings": {
					"items": [
						["a", "b", "c"],
						["x", "y", "z"]
					]
				}
			}
		},
		{
			"brick": {
				"vars": ["first=1", "second=2", "third=3", "fourth=4"],
				"quoted_indices": []
			},
			"expected": {
				"vars": [],
				"quoted_indices": [],
				"local_settings": {
					"first": "1",
					"second": "2",
					"third": "3",
					"fourth": "4"
				}
			}
		},
		{
			"brick": {
				"vars": ["table", "media", "title=Files", "publish=0", "type=image"],
				"quoted_indices": []
			},
			"expected": {
				"vars": ["table", "media"],
				"quoted_indices": [],
				"local_settings": {
					"title": "Files",
					"publish": "0",
					"type": "image"
				}
			}
		},
		{
			"brick": {
				"vars": ["url+encoding=test%2Bvalue"],
				"quoted_indices": []
			},
			"expected": {
				"vars": [],
				"quoted_indices": [],
				"local_settings": {
					"url+encoding": "test+value"
				}
			}
		},
		{
			"brick": {
				"vars": ["description=\"This is a longer description with multiple words\""],
				"quoted_indices": []
			},
			"expected": {
				"vars": [],
				"quoted_indices": [],
				"local_settings": {
					"description": "This is a longer description with multiple words"
				}
			}
		},
		{
			"brick": {
				"vars": [],
				"in_quotes": true,
				"quoted_indices": []
			},
			"expected": {
				"vars": [],
				"in_quotes": true,
				"quoted_indices": [],
				"local_settings": []
			}
		},
		{
			"brick": {
				"vars": ["no_equals", "just", "words"],
				"quoted_indices": []
			},
			"expected": {
				"vars": ["no_equals", "just", "words"],
				"quoted_indices": [],
				"local_settings": []
			}
		},
		{
			"brick": {
				"vars": ["item", "class", " class='%s'"],
				"in_quotes": true,
				"quoted_indices": {
					"2": true
				}
			},
			"expected": {
				"vars": ["item", "class", " class='%s'"],
				"in_quotes": true,
				"quoted_indices": {
					"2": true
				},
				"local_settings": []
			}
		},
		{
			"brick": {
				"vars": ["item", "class", "class=\"%s\""],
				"quoted_indices": []
			},
			"expected": {
				"vars": ["item", "class"],
				"quoted_indices": [],
				"local_settings": {
					"class": "%s"
				}
			}
		},
		{
			"brick": {
				"vars": ["item", "id", " id='%s'"],
				"quoted_indices": {
					"2": true
				}
			},
			"expected": {
				"vars": ["item", "id", " id='%s'"],
				"quoted_indices": {
					"2": true
				},
				"local_settings": []
			}
		}
	],
	"legends": [
		"Simple key=value settings",
		"Quoted value with spaces (backward scanning)",
		"Mixed quoted and unquoted settings",
		"Array values using [item1,item2]",
		"Multidimensional array with named indices",
		"Multidimensional array with array values",
		"Testing order preservation (4 settings)",
		"Real-world example: forms table media * title=Files publish=0 type=image",
		"Plus sign encoding (+ should be preserved)",
		"Multi-word quoted value split across array elements",
		"Empty vars with in_quotes flag",
		"Vars without equals signs (no settings to extract)",
		"Quoted string with = inside should not be treated as setting",
		"Key-value pair with quoted value should be extracted as setting",
		"Id formatting in Menu template"
	]
}
